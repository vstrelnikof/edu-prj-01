# Changelog: –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ pickle –Ω–∞ JSON

## –í–µ—Ä—Å—ñ—è 2.0 - 4 –ª—é—Ç–æ–≥–æ 2026

### üîÑ –û—Å–Ω–æ–≤–Ω—ñ –∑–º—ñ–Ω–∏

#### –ó–∞–º—ñ–Ω–∞ —Ñ–æ—Ä–º–∞—Ç—É –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
- **–ë—É–ª–æ**: pickle (binary serialization)
- **–°—Ç–∞–ª–æ**: JSON (text-based serialization)

### üìù –î–µ—Ç–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏ –ø–æ —Ñ–∞–π–ª–∞—Ö

#### `contacts.py`
**–ó–º—ñ–Ω–∏ –≤ —ñ–º–ø–æ—Ä—Ç–∞—Ö:**
```python
# –ë—É–ª–æ
import pickle

# –°—Ç–∞–ª–æ
import json
```

**–ó–º—ñ–Ω–∏ –≤ Birthday:**
```python
# –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É date –æ–±'—î–∫—Ç—ñ–≤ –¥–ª—è JSON
def __init__(self, value):
    if isinstance(value, str):
        # parse string
    elif isinstance(value, date):
        self.value = value  # –¥–ª—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
```

**–î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤ Record:**
```python
def to_dict(self):
    """–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–Ω—Ç–∞–∫—Ç—É –≤ —Å–ª–æ–≤–Ω–∏–∫ –¥–ª—è JSON"""
    return {
        'name': self.name.value,
        'phones': [phone.value for phone in self.phones],
        'email': self.email.value if self.email else None,
        'birthday': self.birthday.value.strftime('%d.%m.%Y') if self.birthday else None,
        'address': self.address.value if self.address else None
    }

@staticmethod
def from_dict(data):
    """–î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–Ω—Ç–∞–∫—Ç—É –∑—ñ —Å–ª–æ–≤–Ω–∏–∫–∞ JSON"""
    # –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ Record –∑ JSON
```

**–ó–º—ñ–Ω–∏ –≤ AddressBook:**
```python
# –ë—É–ª–æ
self.data_file = Path.home() / "personal_assistant_data" / "contacts.pkl"

# –°—Ç–∞–ª–æ
self.data_file = Path.home() / "personal_assistant_data" / "contacts.json"

# –ë—É–ª–æ –≤ save()
with open(self.data_file, 'wb') as f:
    pickle.dump(self.data, f)

# –°—Ç–∞–ª–æ –≤ save()
contacts_list = [record.to_dict() for record in self.data.values()]
temp_file = self.data_file.with_suffix('.tmp')
with open(temp_file, 'w', encoding='utf-8') as f:
    json.dump(contacts_list, f, ensure_ascii=False, indent=2)
temp_file.replace(self.data_file)  # –ê—Ç–æ–º–∞—Ä–Ω–∞ –∑–∞–º—ñ–Ω–∞

# –ë—É–ª–æ –≤ load()
with open(self.data_file, 'rb') as f:
    self.data = pickle.load(f)

# –°—Ç–∞–ª–æ –≤ load()
with open(self.data_file, 'r', encoding='utf-8') as f:
    contacts_list = json.load(f)
for contact_data in contacts_list:
    record = Record.from_dict(contact_data)
    self.data[record.name.value] = record
```

#### `notes.py`
**–ê–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ –∑–º—ñ–Ω–∏:**
- –ó–∞–º—ñ–Ω–∞ `import pickle` ‚Üí `import json`
- –ó–∞–º—ñ–Ω–∞ `notes.pkl` ‚Üí `notes.json`
- –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥–∏ `to_dict()` —Ç–∞ `from_dict()` –≤ –∫–ª–∞—Å Note
- –û–Ω–æ–≤–ª–µ–Ω–æ `save()` —Ç–∞ `load()` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ JSON
- –î–æ–¥–∞–Ω–æ –∞—Ç–æ–º–∞—Ä–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Ç–∏–º—á–∞—Å–æ–≤–∏–π —Ñ–∞–π–ª

**–ó–º—ñ–Ω–∏ –≤ Note:**
```python
def to_dict(self):
    """–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–æ—Ç–∞—Ç–∫–∏ –≤ —Å–ª–æ–≤–Ω–∏–∫ –¥–ª—è JSON"""
    return {
        'title': self.title,
        'content': self.content,
        'tags': self.tags,
        'created_at': self.created_at.isoformat(),
        'updated_at': self.updated_at.isoformat()
    }

@staticmethod
def from_dict(data):
    """–î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–æ—Ç–∞—Ç–∫–∏ –∑—ñ —Å–ª–æ–≤–Ω–∏–∫–∞ JSON"""
    note = Note(data['title'], data['content'])
    note.tags = data.get('tags', [])
    note.created_at = datetime.fromisoformat(data['created_at'])
    note.updated_at = datetime.fromisoformat(data['updated_at'])
    return note
```

#### `test_personal_assistant.py`
**–î–æ–¥–∞–Ω—ñ –Ω–æ–≤—ñ —Ç–µ—Å—Ç–∏:**
- `test_to_dict()` - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
- `test_from_dict()` - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
- `test_json_save_and_load()` - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è JSON

**–û–Ω–æ–≤–ª–µ–Ω—ñ —ñ—Å–Ω—É—é—á—ñ —Ç–µ—Å—Ç–∏:**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ JSON —Ñ–∞–π–ª—ñ–≤
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ JSON
- –¢–µ—Å—Ç–∏ –Ω–∞ –∞—Ç–æ–º–∞—Ä–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

#### `demo.py`
**–û–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–∑–¥—ñ–ª –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:**
```python
print("üîπ –ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø –î–ê–ù–ò–• (JSON FORMAT)")
print("‚úì –ö–æ–Ω—Ç–∞–∫—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –Ω–∞ –¥–∏—Å–∫ —É JSON —Ñ–æ—Ä–º–∞—Ç—ñ")
print("üí° JSON —Ñ–∞–π–ª–∏ –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç–∏ —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É!")
```

#### `README.md`
**–î–æ–¥–∞–Ω–æ –Ω–æ–≤—ñ —Ä–æ–∑–¥—ñ–ª–∏:**
- –ü–æ—è—Å–Ω–µ–Ω–Ω—è —á–æ–º—É JSON
- –ü—Ä–∏–∫–ª–∞–¥–∏ JSON —Ñ–∞–π–ª—ñ–≤
- –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è JSON vs pickle
- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó

### ‚ú® –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

1. **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö**
   - –§–∞–π–ª–∏ –º–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —É –±—É–¥—å-—è–∫–æ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ
   - –õ–µ–≥–∫–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∞ –≤—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –≤—Ä—É—á–Ω—É

2. **–ê—Ç–æ–º–∞—Ä–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤
   - –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∫–æ—Ä—É–ø—Ü—ñ—ó –¥–∞–Ω–∏—Ö –ø—Ä–∏ –∑–±–æ—è—Ö
   ```python
   temp_file = self.data_file.with_suffix('.tmp')
   # write to temp
   temp_file.replace(self.data_file)  # atomic
   ```

3. **–ö—Ä–æ—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω—ñ—Å—Ç—å**
   - JSON –ø—Ä–∞—Ü—é—î –æ–¥–Ω–∞–∫–æ–≤–æ –Ω–∞ –≤—Å—ñ—Ö –û–°
   - –ù–µ–º–∞—î –ø—Ä–æ–±–ª–µ–º —ñ–∑ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—é –≤–µ—Ä—Å—ñ–π

4. **–ë–µ–∑–ø–µ–∫–∞**
   - JSON –Ω–µ –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∫–æ–¥ (–Ω–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ pickle)
   - –ë–µ–∑–ø–µ—á–Ω–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏ –∑ –Ω–µ–≤—ñ–¥–æ–º–∏—Ö –¥–∂–µ—Ä–µ–ª

### üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ñ–æ—Ä–º–∞—Ç—ñ–≤

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | JSON | pickle |
|---------------|------|--------|
| –ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å | ‚úÖ –¢–∞–∫ | ‚ùå –ë—ñ–Ω–∞—Ä–Ω–∏–π |
| –†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É | –°–µ—Ä–µ–¥–Ω—ñ–π | –ú–µ–Ω—à–∏–π |
| –®–≤–∏–¥–∫—ñ—Å—Ç—å | –®–≤–∏–¥–∫–∞ | –®–≤–∏–¥—à–∞ |
| –ë–µ–∑–ø–µ–∫–∞ | ‚úÖ –ë–µ–∑–ø–µ—á–Ω–∏–π | ‚ö†Ô∏è –ú–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∫–æ–¥ |
| –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è | ‚úÖ –õ–µ–≥–∫–æ | ‚ùå –ù–µ–º–æ–∂–ª–∏–≤–æ |
| –ö—Ä–æ—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω—ñ—Å—Ç—å | ‚úÖ 100% | ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∏ |
| –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è | ‚úÖ –í—Å—é–¥–∏ | ‚ùå –¢—ñ–ª—å–∫–∏ Python |

### üîÑ –ú—ñ–≥—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

–Ø–∫—â–æ —É –≤–∞—Å —î —Å—Ç–∞—Ä—ñ `.pkl` —Ñ–∞–π–ª–∏:

```python
import pickle
import json
from pathlib import Path

# –ß–∏—Ç–∞—î–º–æ —Å—Ç–∞—Ä–∏–π pickle
with open('contacts.pkl', 'rb') as f:
    old_data = pickle.load(f)

# –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤ JSON —Ñ–æ—Ä–º–∞—Ç
contacts_list = []
for record in old_data.values():
    contacts_list.append({
        'name': record.name.value,
        'phones': [p.value for p in record.phones],
        # ... —ñ–Ω—à—ñ –ø–æ–ª—è
    })

# –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —è–∫ JSON
with open('contacts.json', 'w', encoding='utf-8') as f:
    json.dump(contacts_list, f, ensure_ascii=False, indent=2)
```

### üìã Checklist –º—ñ–≥—Ä–∞—Ü—ñ—ó

- [x] –ó–∞–º—ñ–Ω–µ–Ω–æ pickle –Ω–∞ json –≤ —ñ–º–ø–æ—Ä—Ç–∞—Ö
- [x] –î–æ–¥–∞–Ω–æ to_dict() –º–µ—Ç–æ–¥–∏
- [x] –î–æ–¥–∞–Ω–æ from_dict() –º–µ—Ç–æ–¥–∏
- [x] –û–Ω–æ–≤–ª–µ–Ω–æ save() –¥–ª—è JSON
- [x] –û–Ω–æ–≤–ª–µ–Ω–æ load() –¥–ª—è JSON
- [x] –ó–º—ñ–Ω–µ–Ω–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ .pkl ‚Üí .json
- [x] –î–æ–¥–∞–Ω–æ –∞—Ç–æ–º–∞—Ä–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- [x] –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ JSON
- [x] –û–Ω–æ–≤–ª–µ–Ω–æ —Ç–µ—Å—Ç–∏
- [x] –û–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

### üêõ –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

1. **–ü—Ä–æ–±–ª–µ–º–∞ –∑ datetime –≤ JSON**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `.isoformat()` –¥–ª—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `datetime.fromisoformat()` –¥–ª—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

2. **–ü—Ä–æ–±–ª–µ–º–∞ –∑ date –≤ JSON**
   - Birthday –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ string –≤ —Ñ–æ—Ä–º–∞—Ç—ñ DD.MM.YYYY
   - –ü—Ä–∏ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–Ω–≤–µ—Ä—Ç—É—î—Ç—å—Å—è –Ω–∞–∑–∞–¥ —É date

3. **–ü—Ä–æ–±–ª–µ–º–∞ –∑ None –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏**
   - JSON –ø—ñ–¥—Ç—Ä–∏–º—É—î null –Ω–∞—Ç–∏–≤–Ω–æ
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö –ø–æ–ª—ñ–≤

### üìö –ü—Ä–∏–∫–ª–∞–¥–∏ JSON —Ñ–∞–π–ª—ñ–≤

**contacts.json:**
```json
[
  {
    "name": "–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ",
    "phones": ["0991234567"],
    "email": "ivan@example.com",
    "birthday": "15.03.1990",
    "address": "–≤—É–ª. –®–µ–≤—á–µ–Ω–∫–∞, 15, –ö–∏—ó–≤"
  }
]
```

**notes.json:**
```json
[
  {
    "title": "–Ü–¥–µ—ó –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É",
    "content": "–î–æ–¥–∞—Ç–∏ –µ–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤",
    "tags": ["—Ä–æ–±–æ—Ç–∞", "–ø—Ä–æ–µ–∫—Ç"],
    "created_at": "2026-02-04T14:30:00",
    "updated_at": "2026-02-04T14:30:00"
  }
]
```

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
- ‚úÖ –ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å —á–µ—Ä–µ–∑ –º—ñ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π —Å–∫—Ä–∏–ø—Ç
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å
- ‚úÖ –ó–±—ñ–ª—å—à–µ–Ω–∞ –±–µ–∑–ø–µ–∫–∞
- ‚úÖ –õ–µ–≥—à–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ–Ω—à–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

---

**–î–∞—Ç–∞ –º—ñ–≥—Ä–∞—Ü—ñ—ó**: 4 –ª—é—Ç–æ–≥–æ 2026  
**–í–µ—Ä—Å—ñ—è**: 2.0 (JSON Edition)
